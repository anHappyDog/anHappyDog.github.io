---
title: Rn
author: lonelywatch
date:  2023-10-24 14:27:10 +0800
categories: [Android]
tags: [RN,Android]
---

这次Android作业用React-Native做前端，就不用原生Android开发了。Rn使用Js或者是Ts，采用声明式编程，可以像vue那样使用组件式开发。

### Vscode与Android配置





### style

通过`StyleSheet.create({<styles>});`来创建style对象，通过该对象或者其子对象来设置元素的style属性。

也可以通过内联样式来设置。

比如说：

```typescript
const comp1 = function1() {
  	return (
    	<>
        	<Text style={styleTest.test1}>This is really a good day!</Text>
        </>
    );
};


const styleTest = StyleSheet.create({
   test1 :{
       color:"black",
        margin: 10    
	}
});
```

上面style的使用也可以写成`style = {{ color : "black",margin:10 }}`,或者是`style = {[styleSheet.test1,background:"black"]}`,分别代表**内联**，**对象引用**，**混合使用**。

从上面可以看到，元素的很多属性的定义类似于`name={object}`。

### 图片与视频

在Rn中使用`Image`元素来插入图片（使用`source`属性来决定图片的来源，比如说`source={{'uri':"addr"}}`）。Rn并没有内置的Video元素，但是有第三方`react-native-video`库，通过该第三方库引入`Video`元素来实现在rn中展示视频。（需要注意的是，Video使用本地资源时，必须使用`require`来使用资源，否则会无法播放；在使用远程URI时，必须是HTTPS，并且后缀为MP4）

### 列表

可选的元素有：`ScrollerView`,`FlatList`和`SectionList`

### 网络请求

类似于WEB，React Native可以使用其提供的`fetch`来进行网络通信。

使用的话，类似于：

```typescript
fetch("addr",{
    method: "POST",
    headers : {
        ...
    },
       body: JOSN.stringfy({
           ...
       })
});
```

第一个参数addr 为请求地址，第二个参数是可选项，表示请求的设置。

fetch也会返回Promise，使用`async/await`来简化代码。

```typescript
async function fetchSomething() {
    try {
        const response = await fetch("someAddr",
                         	        {
            method : "",
            headers : {},
            body : JSON.stringify({})
        });
        const responseJson = await response.json();
        return responseJson;
    } catch(err) {
        console.log(err);
    }
}
```

其中headers携带请求头，method指定请求方法，body存放数据（这里使用JSON，请求头也应该带有`Content-type : application/json`）。

老一些的方法使用`then-catch`，类似于：

```typescript
return fetch("asd")
	.then(response=>{})
	.catch(err=>{});
```

### 导航

