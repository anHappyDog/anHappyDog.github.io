---
title: RUST
date: 2023-10-19 22:41 +0800
author: lonelywatch
categories: [RUST]
tags: [RUST]
toc: true
---

这里的所有内容都是在阅读《RUST 设计模式》时的总结。


- 借用类型的参数

定义形参时应尽可能地使用借用（如果不需要获得对应数据所有权），并且应该尽可能地让参数的覆盖范围更大。常见的例子就是使用`&str`代替`&String`，使用`&[T]`代替`&Vec<T>`,使用`&T`代替`&Box<T>`。

- 使用format!组建字符串

虽然书上说该方法最可读，但是也提到单纯的`push`对于预分配了的字符串拼接效率可能会更高。

- Default与构造函数

RUST惯例使用关联方法`new`作为类型的构造，并且如果实现了`Default` trait,也会提供一个构造函数，同时为该类型提供更多的函数，比如`or_default`，让代码更可读。书中同样推荐同时实现new和Default。

- `mem::take`与`mem::replace`

`take`会取出对应的数据，将Default值赋予原来的位置。这样做在一些枚举的类型转换时可以代替使用`clone`方法。






